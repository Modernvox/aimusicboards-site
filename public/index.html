<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Music Boards</title>

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #07070c;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.04);
      --border: rgba(255,255,255,0.14);
      --text: rgba(255,255,255,0.95);
      --muted: rgba(255,255,255,0.70);

      --gold: #d4af37;
      --green: #2ecc71;
      --blue: #4aa3ff;
      --red: #ff3b30;

      --cta: #f08a2a;
      --cta2: #ff9c45;

      --radius: 18px;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --max: 1180px;
    }

    *{ box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }
    a{ color: inherit; text-decoration: none; }

    .wrap{
      width: min(var(--max), calc(100% - 48px));
      margin: 0 auto;
    }

    /* ---------------- NAV ---------------- */
    header{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(7,7,12,.80), rgba(7,7,12,.35));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .nav{
      height: 74px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 18px;
    }
    .brand{
      font-weight: 900;
      letter-spacing: .8px;
      text-transform: uppercase;
      font-size: 20px;
      white-space: nowrap;
    }
    .navlinks{
      display:flex;
      align-items:center;
      gap: 22px;
      font-weight: 800;
      font-size: 13px;
      text-transform: uppercase;
      color: rgba(255,255,255,.84);
    }
    .navlinks a{ opacity:.92; }
    .navlinks a:hover{ opacity:1; }
    .navright{
      display:flex;
      align-items:center;
      gap: 12px;
      white-space: nowrap;
    }

    /* ---------------- BUTTONS / PILLS ---------------- */
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 12px 16px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      font-weight: 900;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: .4px;
      cursor: pointer;
      user-select: none;
    }
    .btn:hover{ background: rgba(255,255,255,.09); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(109,92,255,.95), rgba(74,163,255,.85));
      border-color: rgba(255,255,255,.14);
    }
    .btn.cta{
      background: linear-gradient(180deg, var(--cta2), var(--cta));
      border-color: rgba(0,0,0,.22);
      color: #1a0f05;
      padding: 14px 22px;
      border-radius: 10px;
      box-shadow: 0 14px 38px rgba(0,0,0,.35);
      min-width: 240px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.28);
      font-weight: 900;
      letter-spacing: .4px;
      text-transform: uppercase;
      font-size: 12px;
      color: rgba(255,255,255,.88);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
      white-space: nowrap;
    }
    .pill.hidden{ display:none; }
    .dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.35);
      flex: 0 0 auto;
    }
    .dot.on{
      background: var(--green);
      box-shadow: 0 0 18px rgba(46,204,113,.45);
    }

    /* ---------------- HERO (MATCH SAMPLE) ---------------- */
    .hero{
      position: relative;
      padding: 54px 0 26px;
      isolation: isolate;
      overflow: hidden;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }

    /* Background image ONLY for hero */
    .hero::before{
      content:"";
      position:absolute;
      inset: 0;
      z-index: -2;
      background-image: url("https://imagedelivery.net/fYqzQPf1CS3qAF1vZpfSLw/2a1d453f-524b-4472-abbf-ea24a831da00/public");
      background-size: cover;
      background-position: center top;
      background-repeat: no-repeat;
      filter: saturate(1.05) contrast(1.05);
      transform: scale(1.02);
    }

    /* Vignette + readability overlay */
    .hero::after{
      content:"";
      position:absolute;
      inset: 0;
      z-index: -1;
      background:
        radial-gradient(900px 520px at 50% 18%, rgba(0,0,0,.04), rgba(0,0,0,.45) 70%),
        linear-gradient(to bottom, rgba(0,0,0,.04), rgba(7,7,12,.70));
      pointer-events:none;
    }

    .hero-copy{
      text-align: center;
      max-width: 860px;
      margin: 0 auto;
      padding: 8px 0 0;
    }

    /* Pills sit like the sample “status / updated” chips */
    .hero-toprow{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items:center;
      justify-content: center;
      margin-bottom: 18px;
    }

    .headline{
      font-size: clamp(34px, 5.0vw, 66px);
      line-height: 1.02;
      margin: 0 0 12px 0;
      font-weight: 900;
      letter-spacing: -.8px;
      text-transform: uppercase;
      text-shadow: 0 12px 40px rgba(0,0,0,.60);
    }

    .subhead{
      margin: 0 auto 20px auto;
      font-size: clamp(15px, 1.8vw, 18px);
      color: rgba(255,255,255,.78);
      max-width: 760px;
      text-shadow: 0 10px 30px rgba(0,0,0,.45);
    }

    .hero-actions{
      display:flex;
      justify-content:center;
      margin-bottom: 18px;
    }

    /* Now Playing pill-card like sample */
    .nowplaying{
      margin: 10px auto 0 auto;
      padding: 16px 18px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.38);
      backdrop-filter: blur(10px);
      box-shadow: 0 16px 44px rgba(0,0,0,.40);
      max-width: 820px;
      text-align: left;
    }
    .npKicker{
      font-size: 12px;
      font-weight: 900;
      letter-spacing: .7px;
      text-transform: uppercase;
      color: rgba(255,255,255,.68);
      margin-bottom: 8px;
    }
    .npMain{
      font-size: 20px;
      font-weight: 900;
      letter-spacing: .1px;
      color: rgba(255,255,255,.92);
    }
    .npSub{
      margin-top: 6px;
      font-size: 14px;
      color: rgba(255,255,255,.70);
    }

    .ruleline{
      margin-top: 12px;
      text-align:center;
      font-size: 12px;
      color: rgba(255,255,255,.62);
      text-transform: uppercase;
      letter-spacing: .6px;
    }
    .ruleline b{ color: var(--gold); }

    /* ---------------- LEADERBOARD (MATCH SAMPLE BOARD) ---------------- */
    .screen{
      position: relative;
      margin-top: 22px;
      border-radius: 24px;
      background: rgba(0,0,0,.38);
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    /* glow border / inner lights */
    .screen::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(900px 260px at 50% 0%, rgba(109,92,255,.22), rgba(0,0,0,0) 60%),
        radial-gradient(850px 240px at 50% 38%, rgba(212,175,55,.14), rgba(0,0,0,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,0));
      pointer-events:none;
    }

    .screen-inner{
      position: relative;
      padding: 22px;
    }

    .screen-head{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 14px;
      padding: 4px 2px 0;
    }

    .screen-title{
      font-weight: 900;
      letter-spacing: 1px;
      text-transform: uppercase;
      margin: 0;
      font-size: 22px;
      color: rgba(255,255,255,.92);
      text-align:center;
      width: 100%;
    }

    .meta-row{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      margin-top: 6px;
    }
    .mini-muted{
      font-size: 12px;
      color: rgba(255,255,255,.68);
      letter-spacing: .2px;
      font-weight: 800;
      text-transform: uppercase;
    }

    /* top 3 rows like sample */
    .podium{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin: 12px 0 6px;
    }

    .pod{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.30);
      backdrop-filter: blur(10px);
      padding: 14px 16px;
      box-shadow: 0 14px 34px rgba(0,0,0,.35);
      display:grid;
      grid-template-columns: 62px 1fr 90px;
      gap: 12px;
      align-items:center;
      min-height: 62px;
      position: relative;
      overflow: hidden;
    }

    /* subtle inner sheen */
    .pod::before{
      content:"";
      position:absolute;
      inset: 0;
      background: linear-gradient(90deg, rgba(255,255,255,.08), rgba(255,255,255,0) 40%);
      opacity: .35;
      pointer-events:none;
    }

    .pod .rank{
      font-weight: 900;
      letter-spacing: .8px;
      text-transform: uppercase;
      font-size: 14px;
      color: rgba(255,255,255,.78);
      text-align:center;
      position: relative;
      z-index: 1;
    }
    .pod .track{
      font-weight: 900;
      letter-spacing: .2px;
      text-transform: uppercase;
      font-size: 16px;
      color: rgba(255,255,255,.92);
      line-height: 1.15;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      position: relative;
      z-index: 1;
    }
    .pod .score{
      font-weight: 900;
      font-size: 24px;
      color: rgba(255,255,255,.92);
      text-align:right;
      position: relative;
      z-index: 1;
    }
    .pod .meta{ display:none; }

    .pod.top{
      border-color: rgba(212,175,55,.45);
      background:
        linear-gradient(90deg, rgba(212,175,55,.26), rgba(0,0,0,.32) 55%);
    }
    #top2{
      border-color: rgba(255,255,255,.16);
      background: linear-gradient(90deg, rgba(255,255,255,.10), rgba(0,0,0,.32) 55%);
    }
    #top3{
      border-color: rgba(255,255,255,.14);
      background: linear-gradient(90deg, rgba(255,255,255,.08), rgba(0,0,0,.32) 55%);
    }

    /* hide old table on desktop to match sample */
    .tablewrap{ display:none; }

    .mobileOnly{ display:none; }

    /* ---------------- TWO-COLUMN: HOW + LIVE NOW ---------------- */
    .grid2{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap: 18px;
      margin-top: 22px;
    }

    .card{
      border-radius: 18px;
      background: rgba(0,0,0,.30);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 12px 38px rgba(0,0,0,.35);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .card h3{
      margin: 0;
      padding: 16px 16px 12px;
      font-size: 18px;
      font-weight: 900;
      letter-spacing: .6px;
      text-transform: uppercase;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }

    .how{
      padding: 14px 16px 18px;
      display:flex;
      flex-direction: column;
      gap: 14px;
    }
    .step{
      display:grid;
      grid-template-columns: 28px 1fr;
      gap: 12px;
      align-items:flex-start;
    }
    .icon{
      width: 28px; height: 28px;
      border-radius: 10px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      display:flex; align-items:center; justify-content:center;
      color: rgba(255,255,255,.90);
      font-weight: 900;
      font-size: 14px;
    }
    .step b{
      display:inline-block;
      color: rgba(255,255,255,.92);
      letter-spacing: .2px;
      text-transform: uppercase;
      font-weight: 900;
      font-size: 13px;
    }
    .step p{
      margin: 6px 0 0 0;
      color: rgba(255,255,255,.72);
      font-size: 14px;
      line-height: 1.35;
    }

    .livebox{ padding: 14px 16px 18px; }
    .livepill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(74,163,255,.16);
      border: 1px solid rgba(74,163,255,.28);
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: .6px;
      font-size: 12px;
      margin-bottom: 12px;
    }
    .livepill .dot{ background: var(--red); box-shadow: 0 0 16px rgba(255,59,48,.55); }

    .thumb{
      width: 100%;
      aspect-ratio: 16/9;
      border-radius: 14px;
      background:
        radial-gradient(520px 220px at 40% 30%, rgba(255,255,255,.10), rgba(0,0,0,0) 65%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 10px 28px rgba(0,0,0,.35);
      margin-bottom: 12px;
      position: relative;
      overflow: hidden;
    }
    .thumb::after{
      content:"LIVE PREVIEW";
      position:absolute;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      letter-spacing: .8px;
      text-transform: uppercase;
      color: rgba(255,255,255,.55);
      font-size: 12px;
    }

    .liveartist{
      font-weight: 900;
      color: rgba(255,255,255,.90);
      margin: 0 0 12px 0;
    }

    /* ---------------- HIGHLIGHTS (MATCH SAMPLE STRIP) ---------------- */
    .section{
      margin-top: 26px;
      padding-bottom: 56px;
    }
    .section-title{
      margin: 0 0 12px 0;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: .8px;
      color: rgba(255,255,255,.92);
      font-size: 18px;
    }

    .tiles{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
    }
    .tile{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.32);
      overflow:hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .tile .img{
      height: 112px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(420px 140px at 40% 35%, rgba(255,255,255,.10), rgba(0,0,0,0) 70%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      position: relative;
    }
    .tile .img::after{
      content:"HIGHLIGHT";
      position:absolute;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      letter-spacing: .7px;
      text-transform: uppercase;
      color: rgba(255,255,255,.50);
      font-size: 11px;
    }
    .tile .meta{
      padding: 10px 12px 12px;
      display:flex;
      justify-content: space-between;
      gap: 10px;
      align-items:flex-end;
    }
    .tile .meta .tname{
      font-weight: 900;
      font-size: 13px;
      color: rgba(255,255,255,.88);
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .tile .meta .tscore{
      font-weight: 900;
      font-size: 13px;
      color: rgba(255,255,255,.80);
    }
    .tscore b{ color: var(--gold); }

    .center-actions{
      margin-top: 16px;
      display:flex;
      justify-content:center;
    }

    /* ---------------- MOBILE-FIRST TUNING (MATCH SAMPLE MOBILE) ---------------- */
    @media (max-width: 980px){
        .navlinks{ display:none; }
        .grid2{ grid-template-columns: 1fr; }
        .tiles{ grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 720px){
        /* --- HERO: mobile composition like the mockup --- */
        .hero{
            padding: 18px 0 14px;
            min-height: 0;
        }

        .hero::before{
            background-repeat: no-repeat;
            background-position: 20% 0%;
            background-size: 120% auto;
            transform: none;
            filter: saturate(1.08) brightness(1.12) contrast(1.00);
        }

        .hero::after{
            background:
                radial-gradient(640px 360px at 50% 18%, rgba(0,0,0,0.00), rgba(0,0,0,0.18) 62%),
                linear-gradient(to bottom, rgba(0,0,0,0.06), rgba(7,7,12,0.34));
        }

        .hero .wrap{
            padding-bottom: 10px;
        }

        .hero-copy{
            max-width: 720px;
        }

        .hero-toprow{ margin-bottom: 10px; }
        .headline{
            font-size: clamp(28px, 8.6vw, 40px);
            line-height: 1.05;
            margin: 0 0 10px 0;
        }
        .subhead{
            font-size: 14px;
            margin: 0 auto 12px auto;
        }

        .hero-actions{ margin-bottom: 12px; }
        .btn.cta{ width: 100%; max-width: 360px; min-width: 0; }

        .nowplaying{
            margin-top: 8px;
            padding: 14px 14px;
        }
        .npMain{ font-size: 17px; }

        /* ✅ THESE WERE OUTSIDE THE MEDIA QUERY — MOVED INSIDE */
        .screen-inner{ padding: 16px; }
        .pod{
            grid-template-columns: 54px 1fr 72px;
            padding: 12px 14px;
            min-height: 60px;
        }
        .pod .track{ font-size: 14px; }
        .pod .score{ font-size: 20px; }

        .tiles{ grid-template-columns: 1fr; }
    }

    /* ultra-small phones */
    @media (max-width: 390px){
        .brand{ font-size: 16px; }
        .btn{ padding: 11px 12px; font-size: 12px; }
        .headline{ font-size: 30px; }
    }

  </style>
</head>

<body>
  <!-- NAV -->
  <header>
    <div class="wrap">
      <div class="nav">
        <div class="brand">AI MUSIC BOARDS</div>

        <nav class="navlinks" aria-label="primary">
          <a href="https://aimusicboards.com/">Home</a>
          <a href="https://aimusicboards.com/board">Leaderboard</a>
          <a href="https://aimusicboards.com/submit">Submit Music</a>
        </nav>

        <div class="navright">
          <a class="btn primary" href="https://www.tiktok.com/@snapink.official" target="_blank" rel="noopener">Watch Live</a>
          <a class="btn" href="#login">Log In</a>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main id="home" class="hero">
    <div class="wrap">
      <div class="hero-copy">
        <div class="hero-toprow">
          <!-- ✅ required IDs for your script -->
          <div class="pill" id="submitBadge">
            <span class="dot" id="liveDot"></span>
            <span id="liveText">Status: —</span>
          </div>

          <div class="pill hidden" id="sessionPill">Reviewed Live: —</div>

          <div class="pill" id="lastUpdated">Updated: —</div>
        </div>

        <h1 class="headline">DISCOVER THE TOP<br/>AI-GENERATED MUSIC</h1>
        <p class="subhead">Submit your tracks, climb the ranks, and showcase your music!</p>

        <div class="hero-actions">
          <!-- ✅ required ID for your script -->
          <a class="btn cta" id="submitBtn" href="https://aimusicboards.com/submit">Submit your song</a>
        </div>

        <!-- ✅ required IDs for your script -->
        <div class="nowplaying" aria-label="Now playing">
          <div class="npKicker">Now Playing</div>
          <div class="npMain" id="npMain">Nothing selected</div>
          <div class="npSub" id="npSub"></div>
        </div>

        <!-- ✅ required ID for your script -->
        <div class="ruleline" id="sessionLine" style="display:none;"></div>
      </div>

      <!-- LEADERBOARD -->
      <section id="leaderboard" class="screen" aria-label="Leaderboard">
        <div class="screen-inner">
          <div class="screen-head">
            <h2 class="screen-title">LEADERBOARD</h2>
            <div class="meta-row">
              <div class="mini-muted">Qualifying: <b style="color:var(--gold)">40+</b> total</div>
            </div>
          </div>

          <!-- Top 3 rows -->
          <div class="podium" aria-label="Top 3">
            <!-- ✅ required IDs for your script -->
            <div class="pod top" id="top1">
              <div class="rank">1</div>
              <div class="track">—</div>
              <div class="score">—</div>
              <div class="meta">—</div>
              <div class="meta">—</div>
            </div>

            <div class="pod" id="top2">
              <div class="rank">2</div>
              <div class="track">—</div>
              <div class="score">—</div>
              <div class="meta">—</div>
              <div class="meta">—</div>
            </div>

            <div class="pod" id="top3">
              <div class="rank">3</div>
              <div class="track">—</div>
              <div class="score">—</div>
              <div class="meta">—</div>
              <div class="meta">—</div>
            </div>
          </div>

          <div class="ruleline">To make the leaderboard combined scores must be <b>40+</b></div>

          <!-- Mobile list hook (if your script uses it) -->
          <div class="card mobileOnly" style="margin-top:12px;">
            <div style="padding:12px 12px; border-bottom:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.03); font-weight:900; text-transform:uppercase; letter-spacing:.6px; font-size:12px; color:rgba(255,255,255,.78);">
              Leaderboard (Mobile)
            </div>
            <!-- ✅ required ID for your script -->
            <div id="leaderboardMobile"></div>
          </div>
        </div>
      </section>

      <!-- HOW IT WORKS + LIVE NOW -->
      <section class="grid2">
        <div class="card">
          <h3>How It Works</h3>
          <div class="how">
            <div class="step">
              <div class="icon">♪</div>
              <div>
                <b>SUBMIT:</b>
                <p>Upload your original AI music for our judges to evaluate during live sessions.</p>
              </div>
            </div>

            <div class="step">
              <div class="icon">⎈</div>
              <div>
                <b>SCORE:</b>
                <p>Judged on lyrics, delivery, originality, repeatability &amp; production (1–10 each).</p>
              </div>
            </div>

            <div class="step">
              <div class="icon">↑</div>
              <div>
                <b>CLIMB:</b>
                <p>Combined score <b>40+</b> qualifies for the leaderboard and weekly showcase.</p>
              </div>
            </div>
          </div>
        </div>

        <aside class="card" id="watch">
          <h3>Live Now</h3>
          <div class="livebox">
            <div class="livepill"><span class="dot"></span> Live Now</div>
            <div class="thumb" aria-label="Live thumbnail"></div>
            <p class="liveartist">Now Playing updates above</p>
            <a class="btn primary" href="https://www.tiktok.com/@snapink.official" target="_blank" rel="noopener">Watch Live</a>
          </div>
        </aside>
      </section>

      <!-- HIGHLIGHTS -->
      <section class="section" id="highlights">
        <div class="section-title">Top Performance Highlights</div>

        <div class="tiles">
          <div class="tile">
            <div class="img"></div>
            <div class="meta">
              <div class="tname">Synthenusia</div>
              <div class="tscore"><b>7.5</b></div>
            </div>
          </div>

          <div class="tile">
            <div class="img"></div>
            <div class="meta">
              <div class="tname">Melody Machine</div>
              <div class="tscore"><b>9.1</b></div>
            </div>
          </div>

          <div class="tile">
            <div class="img"></div>
            <div class="meta">
              <div class="tname">Beat Bot</div>
              <div class="tscore"><b>6.3</b></div>
            </div>
          </div>

          <div class="tile">
            <div class="img"></div>
            <div class="meta">
              <div class="tname">Rhythmral</div>
              <div class="tscore"><b>7.0</b></div>
            </div>
          </div>
        </div>

        <div class="center-actions">
          <a class="btn cta" href="#highlights">View All Highlights</a>
        </div>
      </section>
    </div>
  </main>



  <!-- ✅ YOUR SCRIPT (unchanged) -->
<script>
  const QUALIFYING_MIN = 40;

  function fmtTime(d){
    return d.toLocaleString(undefined, {
      month: "short",
      day: "2-digit",
      hour: "numeric",
      minute: "2-digit"
    });
  }

  function escapeHtml(s){
    return String(s ?? "").replace(/[&<>"']/g, m => ({
      "&":"&amp;",
      "<":"&lt;",
      ">":"&gt;",
      '"':"&quot;",
      "'":"&#039;"
    }[m]));
  }

  function safeNumber(n, fallback="—"){
    const x = Number(n);
    return Number.isFinite(x) ? x : fallback;
  }

  function setBadgeState(open) {
    const badge = document.getElementById("submitBadge");
    const dot = document.getElementById("liveDot");
    const text = document.getElementById("liveText");
    const btn = document.getElementById("submitBtn");

    if (!badge || !dot || !text || !btn) return;

    if (open) {
      badge.style.borderColor = "rgba(46,204,113,0.35)";
      badge.style.background = "rgba(46,204,113,0.10)";
      dot.classList.add("on");
      text.textContent = "Status: LIVE (Accepting submissions)";
      btn.textContent = "Submit your song (LIVE)";
      btn.href = "/submit";
    } else {
      badge.style.borderColor = "rgba(231,76,60,0.35)";
      badge.style.background = "rgba(231,76,60,0.10)";
      dot.classList.remove("on");
      text.textContent = "Status: OFFLINE (Closed)";
      btn.textContent = "Submit your song";
      btn.href = "/submit";
    }
  }

  async function loadLiveStatus() {
    try {
      const res = await fetch("/api/status", { cache: "no-store" });
      const data = await res.json();
      setBadgeState(!!data.submissions_open);
    } catch (e) {
      setBadgeState(false);
      const text = document.getElementById("liveText");
      if (text) text.textContent = "Status: —";
    }
  }

  async function loadNowPlaying() {
    try {
      const res = await fetch("/api/now_playing", { cache: "no-store" });
      const data = await res.json();
      const np = data.now_playing || null;

      const npMain = document.getElementById("npMain");
      const npSub = document.getElementById("npSub");
      if (!npMain || !npSub) return;

      if (np && (np.artist_name || np.track_title)) {
        npMain.textContent = `${np.artist_name || "—"} — ${np.track_title || "—"}`;

        const sub = [];
        if (np.genre) sub.push(np.genre);
        if (np.paid_type) sub.push(np.paid_type === "SUPER" ? "UP NEXT" : "PAID SKIP");
        else if (np.submission_id) sub.push("LIVE REVIEW");

        npSub.textContent = sub.join(" • ");
      } else {
        npMain.textContent = "Nothing selected";
        npSub.textContent = "";
      }
    } catch (e) {
      // silent
    }
  }

  function renderPodium(id, entry, rank) {
    const el = document.getElementById(id);
    if (!el) return;

    const trackEl = el.querySelector(".track");
    const scoreEl = el.querySelector(".score");
    const metaEl = el.querySelector(".meta");

    // Your podium blocks currently have multiple ".meta" divs in markup.
    // We'll set the first one we find; if none exist, we only set track/score.
    const metas = el.querySelectorAll(".meta");
    const meta1 = metas && metas.length ? metas[0] : null;

    if (!entry) {
      if (trackEl) trackEl.textContent = "—";
      if (scoreEl) scoreEl.textContent = "—";
      if (meta1) meta1.textContent = "—";
      return;
    }

    const artist = entry.artist_name || "—";
    const track = entry.track_title || "—";
    const genre = entry.genre || "—";
    const total = safeNumber(entry.total, "—");

    if (trackEl) trackEl.textContent = `${artist} — ${track}`;
    if (scoreEl) scoreEl.textContent = total;
    if (meta1) meta1.textContent = genre;

    // If you want breakdowns on homepage later, add fields to /api/board and set metas[1] here.
    // Example: metas[1].textContent = "L7 • V6 • P8 • O7";
  }

  function renderTable(entries) {
    const tbody = document.getElementById("leaderboardBody");
    if (!tbody) return;

    tbody.innerHTML = "";

    entries.slice(0, 50).forEach((e, i) => {
      const tr = document.createElement("tr");
      if (i === 0) tr.classList.add("rank-1");
      if (i === 1) tr.classList.add("rank-2");
      if (i === 2) tr.classList.add("rank-3");

      tr.innerHTML = `
        <td>${i + 1}</td>
        <td>${escapeHtml(e.artist_name || "—")}</td>
        <td>${escapeHtml(e.track_title || "—")}</td>
        <td>${escapeHtml(e.genre || "—")}</td>
        <td><strong>${safeNumber(e.total, "—")}</strong></td>
        <td>${escapeHtml(e.breakdown || "—")}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  function renderMobile(entries) {
    const wrap = document.getElementById("leaderboardMobile");
    if (!wrap) return;

    wrap.innerHTML = "";

    entries.slice(0, 50).forEach((e, i) => {
      const row = document.createElement("div");
      row.className = "entry" + (i === 0 ? " gold" : i === 1 ? " green" : i === 2 ? " blue" : "");

      row.innerHTML = `
        <div class="r">#${i + 1}</div>
        <div class="main">
          <div class="title">${escapeHtml(e.artist_name || "—")} — ${escapeHtml(e.track_title || "—")}</div>
          <div class="sub">${escapeHtml(e.genre || "—")}</div>
        </div>
        <div class="score">${safeNumber(e.total, "—")}</div>
      `;
      wrap.appendChild(row);
    });
  }

  async function loadLeaderboardHomepage() {
    try {
      // Use the SAME endpoint as the working leaderboard page
      const res = await fetch("/api/board", { cache: "no-store" });
      const j = await res.json();

      const lastUpdated = document.getElementById("lastUpdated");
      if (lastUpdated) lastUpdated.textContent = "Updated: " + fmtTime(new Date());

      const items = Array.isArray(j?.items) ? j.items : [];

      // Only show qualifying
      const entries = items.filter(e => Number(e.total || 0) >= QUALIFYING_MIN);

      renderPodium("top1", entries[0], 1);
      renderPodium("top2", entries[1], 2);
      renderPodium("top3", entries[2], 3);

      renderTable(entries);
      renderMobile(entries);
    } catch (err) {
      console.error("Failed to load homepage leaderboard:", err);
    }
  }

  // Run
  loadLiveStatus();
  loadNowPlaying();
  loadLeaderboardHomepage();

  // Poll
  setInterval(loadLiveStatus, 5000);
  setInterval(loadNowPlaying, 2000);
  setInterval(loadLeaderboardHomepage, 15000);
</script>

</body>
</html>
